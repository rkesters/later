later=function(){"use strict";var R={version:"1.2.0"};return Array.prototype.indexOf||(Array.prototype.indexOf=function(t){if(null==this)throw new TypeError;var e=Object(this),n=e.length>>>0;if(0==n)return-1;var r=0;if(1<arguments.length&&((r=Number(arguments[1]))!=r?r=0:0!=r&&r!=1/0&&r!=-1/0&&(r=(0<r||-1)*Math.floor(Math.abs(r)))),n<=r)return-1;for(var a=0<=r?r:Math.max(n-Math.abs(r),0);a<n;a++)if(a in e&&e[a]===t)return a;return-1}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),R.array={},R.array.sort=function(t,e){t.sort(function(t,e){return t-e}),e&&0===t[0]&&t.push(t.shift())},R.array.next=function(t,e,n){for(var r,a=0!==n[0],i=0,u=e.length-1;-1<u;--u){if((r=e[u])===t)return r;if(!(t<r||0===r&&a&&n[1]>t))break;i=u}return e[i]},R.array.nextInvalid=function(t,e,n){for(var r=n[0],a=n[1],i=e.length,u=0===e[i-1]&&0!==r?a:0,v=t,l=e.indexOf(t),o=v;v===(e[l]||u);)if(a<++v&&(v=r),++l===i&&(l=0),v===o)return;return v},R.array.prev=function(t,e,n){for(var r,a=e.length,i=0!==n[0],u=a-1,v=0;v<a;v++){if((r=e[v])===t)return r;if(!(r<t||0===r&&i&&n[1]<t))break;u=v}return e[u]},R.array.prevInvalid=function(t,e,n){for(var r=n[0],a=n[1],i=e.length,u=0===e[i-1]&&0!==r?a:0,v=t,l=e.indexOf(t),o=v;v===(e[l]||u);)if(--v<r&&(v=a),-1===--l&&(l=i-1),v===o)return;return v},R.day=R.D={name:"day",range:86400,val:function(t){return t.D||(t.D=R.date.getDate.call(t))},isValid:function(t,e){return R.D.val(t)===(e||R.D.extent(t)[1])},extent:function(t){if(t.DExtent)return t.DExtent;var e=R.M.val(t),n=R.DAYS_IN_MONTH[e-1];return 2===e&&366===R.dy.extent(t)[1]&&(n+=1),t.DExtent=[1,n]},start:function(t){return t.DStart||(t.DStart=R.date.next(R.Y.val(t),R.M.val(t),R.D.val(t)))},end:function(t){return t.DEnd||(t.DEnd=R.date.prev(R.Y.val(t),R.M.val(t),R.D.val(t)))},next:function(t,e){e=e>R.D.extent(t)[1]?1:e;var n=R.date.nextRollover(t,e,R.D,R.M),r=R.D.extent(n)[1];return e=r<e?1:e||r,R.date.next(R.Y.val(n),R.M.val(n),e)},prev:function(t,e){var n=R.date.prevRollover(t,e,R.D,R.M),r=R.D.extent(n)[1];return R.date.prev(R.Y.val(n),R.M.val(n),!(r<e)&&e||r)}},R.dayOfWeekCount=R.dc={name:"day of week count",range:604800,val:function(t){return t.dc||(t.dc=Math.floor((R.D.val(t)-1)/7)+1)},isValid:function(t,e){return R.dc.val(t)===e||0===e&&R.D.val(t)>R.D.extent(t)[1]-7},extent:function(t){return t.dcExtent||(t.dcExtent=[1,Math.ceil(R.D.extent(t)[1]/7)])},start:function(t){return t.dcStart||(t.dcStart=R.date.next(R.Y.val(t),R.M.val(t),Math.max(1,7*(R.dc.val(t)-1)+1||1)))},end:function(t){return t.dcEnd||(t.dcEnd=R.date.prev(R.Y.val(t),R.M.val(t),Math.min(7*R.dc.val(t),R.D.extent(t)[1])))},next:function(t,e){e=e>R.dc.extent(t)[1]?1:e;var n=R.date.nextRollover(t,e,R.dc,R.M);e=R.dc.extent(n)[1]<e?1:e;var r=R.date.next(R.Y.val(n),R.M.val(n),0===e?R.D.extent(n)[1]-6:1+7*(e-1));return r.getTime()<=t.getTime()?(n=R.M.next(t,R.M.val(t)+1),R.date.next(R.Y.val(n),R.M.val(n),0===e?R.D.extent(n)[1]-6:1+7*(e-1))):r},prev:function(t,e){var n=R.date.prevRollover(t,e,R.dc,R.M),r=R.dc.extent(n)[1];return e=!(r<e)&&e||r,R.dc.end(R.date.prev(R.Y.val(n),R.M.val(n),1+7*(e-1)))}},R.dayOfWeek=R.dw=R.d={name:"day of week",range:86400,val:function(t){return t.dw||(t.dw=R.date.getDay.call(t)+1)},isValid:function(t,e){return R.dw.val(t)===(e||7)},extent:function(){return[1,7]},start:function(t){return R.D.start(t)},end:function(t){return R.D.end(t)},next:function(t,e){return e=7<e?1:e||7,R.date.next(R.Y.val(t),R.M.val(t),R.D.val(t)+(e-R.dw.val(t))+(e<=R.dw.val(t)?7:0))},prev:function(t,e){return e=!(7<e)&&e||7,R.date.prev(R.Y.val(t),R.M.val(t),R.D.val(t)+(e-R.dw.val(t))+(e>=R.dw.val(t)?-7:0))}},R.dayOfYear=R.dy={name:"day of year",range:86400,val:function(t){return t.dy||(t.dy=Math.ceil(1+(R.D.start(t).getTime()-R.Y.start(t).getTime())/R.DAY))},isValid:function(t,e){return R.dy.val(t)===(e||R.dy.extent(t)[1])},extent:function(t){var e=R.Y.val(t);return t.dyExtent||(t.dyExtent=[1,e%4?365:366])},start:function(t){return R.D.start(t)},end:function(t){return R.D.end(t)},next:function(t,e){e=e>R.dy.extent(t)[1]?1:e;var n=R.date.nextRollover(t,e,R.dy,R.Y),r=R.dy.extent(n)[1];return e=r<e?1:e||r,R.date.next(R.Y.val(n),R.M.val(n),e)},prev:function(t,e){var n=R.date.prevRollover(t,e,R.dy,R.Y),r=R.dy.extent(n)[1];return e=!(r<e)&&e||r,R.date.prev(R.Y.val(n),R.M.val(n),e)}},R.hour=R.h={name:"hour",range:3600,val:function(t){return t.h||(t.h=R.date.getHour.call(t))},isValid:function(t,e){return R.h.val(t)===e},extent:function(){return[0,23]},start:function(t){return t.hStart||(t.hStart=R.date.next(R.Y.val(t),R.M.val(t),R.D.val(t),R.h.val(t)))},end:function(t){return t.hEnd||(t.hEnd=R.date.prev(R.Y.val(t),R.M.val(t),R.D.val(t),R.h.val(t)))},next:function(t,e){e=23<e?0:e;var n=R.date.next(R.Y.val(t),R.M.val(t),R.D.val(t)+(e<=R.h.val(t)?1:0),e);return!R.date.isUTC&&n.getTime()<=t.getTime()&&(n=R.date.next(R.Y.val(n),R.M.val(n),R.D.val(n),e+1)),n},prev:function(t,e){return e=23<e?23:e,R.date.prev(R.Y.val(t),R.M.val(t),R.D.val(t)+(e>=R.h.val(t)?-1:0),e)}},R.minute=R.m={name:"minute",range:60,val:function(t){return t.m||(t.m=R.date.getMin.call(t))},isValid:function(t,e){return R.m.val(t)===e},extent:function(t){return[0,59]},start:function(t){return t.mStart||(t.mStart=R.date.next(R.Y.val(t),R.M.val(t),R.D.val(t),R.h.val(t),R.m.val(t)))},end:function(t){return t.mEnd||(t.mEnd=R.date.prev(R.Y.val(t),R.M.val(t),R.D.val(t),R.h.val(t),R.m.val(t)))},next:function(t,e){var n=R.m.val(t),r=R.s.val(t),a=59<e?60-n:e<=n?60-n+e:e-n,i=new Date(t.getTime()+a*R.MIN-r*R.SEC);return!R.date.isUTC&&i.getTime()<=t.getTime()&&(i=new Date(t.getTime()+(a+120)*R.MIN-r*R.SEC)),i},prev:function(t,e){return e=59<e?59:e,R.date.prev(R.Y.val(t),R.M.val(t),R.D.val(t),R.h.val(t)+(e>=R.m.val(t)?-1:0),e)}},R.month=R.M={name:"month",range:2629740,val:function(t){return t.M||(t.M=R.date.getMonth.call(t)+1)},isValid:function(t,e){return R.M.val(t)===(e||12)},extent:function(){return[1,12]},start:function(t){return t.MStart||(t.MStart=R.date.next(R.Y.val(t),R.M.val(t)))},end:function(t){return t.MEnd||(t.MEnd=R.date.prev(R.Y.val(t),R.M.val(t)))},next:function(t,e){return e=12<e?1:e||12,R.date.next(R.Y.val(t)+(e>R.M.val(t)?0:1),e)},prev:function(t,e){return e=!(12<e)&&e||12,R.date.prev(R.Y.val(t)-(e>=R.M.val(t)?1:0),e)}},R.second=R.s={name:"second",range:1,val:function(t){return t.s||(t.s=R.date.getSec.call(t))},isValid:function(t,e){return R.s.val(t)===e},extent:function(){return[0,59]},start:function(t){return t},end:function(t){return t},next:function(t,e){var n=R.s.val(t),r=59<e?60-n:e<=n?60-n+e:e-n,a=new Date(t.getTime()+r*R.SEC);return!R.date.isUTC&&a.getTime()<=t.getTime()&&(a=new Date(t.getTime()+(r+7200)*R.SEC)),a},prev:function(t,e,n){return e=59<e?59:e,R.date.prev(R.Y.val(t),R.M.val(t),R.D.val(t),R.h.val(t),R.m.val(t)+(e>=R.s.val(t)?-1:0),e)}},R.time=R.t={name:"time",range:1,val:function(t){return t.t||(t.t=3600*R.h.val(t)+60*R.m.val(t)+R.s.val(t))},isValid:function(t,e){return R.t.val(t)===e},extent:function(){return[0,86399]},start:function(t){return t},end:function(t){return t},next:function(t,e){e=86399<e?0:e;var n=R.date.next(R.Y.val(t),R.M.val(t),R.D.val(t)+(e<=R.t.val(t)?1:0),0,0,e);return!R.date.isUTC&&n.getTime()<t.getTime()&&(n=R.date.next(R.Y.val(n),R.M.val(n),R.D.val(n),R.h.val(n),R.m.val(n),e+7200)),n},prev:function(t,e){return e=86399<e?86399:e,R.date.next(R.Y.val(t),R.M.val(t),R.D.val(t)+(e>=R.t.val(t)?-1:0),0,0,e)}},R.weekOfMonth=R.wm={name:"week of month",range:604800,val:function(t){return t.wm||(t.wm=(R.D.val(t)+(R.dw.val(R.M.start(t))-1)+(7-R.dw.val(t)))/7)},isValid:function(t,e){return R.wm.val(t)===(e||R.wm.extent(t)[1])},extent:function(t){return t.wmExtent||(t.wmExtent=[1,(R.D.extent(t)[1]+(R.dw.val(R.M.start(t))-1)+(7-R.dw.val(R.M.end(t))))/7])},start:function(t){return t.wmStart||(t.wmStart=R.date.next(R.Y.val(t),R.M.val(t),Math.max(R.D.val(t)-R.dw.val(t)+1,1)))},end:function(t){return t.wmEnd||(t.wmEnd=R.date.prev(R.Y.val(t),R.M.val(t),Math.min(R.D.val(t)+(7-R.dw.val(t)),R.D.extent(t)[1])))},next:function(t,e){e=e>R.wm.extent(t)[1]?1:e;var n=R.date.nextRollover(t,e,R.wm,R.M),r=R.wm.extent(n)[1];return e=r<e?1:e||r,R.date.next(R.Y.val(n),R.M.val(n),Math.max(1,7*(e-1)-(R.dw.val(n)-2)))},prev:function(t,e){var n=R.date.prevRollover(t,e,R.wm,R.M),r=R.wm.extent(n)[1];return e=!(r<e)&&e||r,R.wm.end(R.date.next(R.Y.val(n),R.M.val(n),Math.max(1,7*(e-1)-(R.dw.val(n)-2))))}},R.weekOfYear=R.wy={name:"week of year (ISO)",range:604800,val:function(t){if(t.wy)return t.wy;var e=R.dw.next(R.wy.start(t),5),n=R.dw.next(R.Y.prev(e,R.Y.val(e)-1),5);return t.wy=1+Math.ceil((e.getTime()-n.getTime())/R.WEEK)},isValid:function(t,e){return R.wy.val(t)===(e||R.wy.extent(t)[1])},extent:function(t){if(t.wyExtent)return t.wyExtent;var e=R.dw.next(R.wy.start(t),5),n=R.dw.val(R.Y.start(e)),r=R.dw.val(R.Y.end(e));return t.wyExtent=[1,5===n||5===r?53:52]},start:function(t){return t.wyStart||(t.wyStart=R.date.next(R.Y.val(t),R.M.val(t),R.D.val(t)-(1<R.dw.val(t)?R.dw.val(t)-2:6)))},end:function(t){return t.wyEnd||(t.wyEnd=R.date.prev(R.Y.val(t),R.M.val(t),R.D.val(t)+(1<R.dw.val(t)?8-R.dw.val(t):0)))},next:function(t,e){e=e>R.wy.extent(t)[1]?1:e;var n=R.dw.next(R.wy.start(t),5),r=R.date.nextRollover(n,e,R.wy,R.Y);1!==R.wy.val(r)&&(r=R.dw.next(r,2));var a=R.wy.extent(r)[1],i=R.wy.start(r);return e=a<e?1:e||a,R.date.next(R.Y.val(i),R.M.val(i),R.D.val(i)+7*(e-1))},prev:function(t,e){var n=R.dw.next(R.wy.start(t),5),r=R.date.prevRollover(n,e,R.wy,R.Y);1!==R.wy.val(r)&&(r=R.dw.next(r,2));var a=R.wy.extent(r)[1],i=R.wy.end(r);return e=!(a<e)&&e||a,R.wy.end(R.date.next(R.Y.val(i),R.M.val(i),R.D.val(i)+7*(e-1)))}},R.year=R.Y={name:"year",range:31556900,val:function(t){return t.Y||(t.Y=R.date.getYear.call(t))},isValid:function(t,e){return R.Y.val(t)===e},extent:function(){return[1970,2099]},start:function(t){return t.YStart||(t.YStart=R.date.next(R.Y.val(t)))},end:function(t){return t.YEnd||(t.YEnd=R.date.prev(R.Y.val(t)))},next:function(t,e){return e>R.Y.val(t)&&e<=R.Y.extent()[1]?R.date.next(e):R.NEVER},prev:function(t,e){return e<R.Y.val(t)&&e>=R.Y.extent()[0]?R.date.prev(e):R.NEVER}},R.fullDate=R.fd={name:"full date",range:1,val:function(t){return t.fd||(t.fd=t.getTime())},isValid:function(t,e){return R.fd.val(t)===e},extent:function(){return[0,3250368e7]},start:function(t){return t},end:function(t){return t},next:function(t,e){return R.fd.val(t)<e?new Date(e):R.NEVER},prev:function(t,e){return R.fd.val(t)>e?new Date(e):R.NEVER}},R.modifier={},R.modifier.after=R.modifier.a=function(n,t){var r=t[0];return{name:"after "+n.name,range:(n.extent(new Date)[1]-r)*n.range,val:n.val,isValid:function(t,e){return this.val(t)>=r},extent:n.extent,start:n.start,end:n.end,next:function(t,e){return e!=r&&(e=n.extent(t)[0]),n.next(t,e)},prev:function(t,e){return e=e===r?n.extent(t)[1]:r-1,n.prev(t,e)}}},R.modifier.before=R.modifier.b=function(n,t){var r=t[t.length-1];return{name:"before "+n.name,range:n.range*(r-1),val:n.val,isValid:function(t,e){return this.val(t)<r},extent:n.extent,start:n.start,end:n.end,next:function(t,e){return e=e===r?n.extent(t)[0]:r,n.next(t,e)},prev:function(t,e){return e=e===r?r-1:n.extent(t)[1],n.prev(t,e)}}},R.compile=function(t){var f,c=[],x=0;for(var e in t){var n=e.split("_"),r=n[0],a=n[1],i=t[e],u=a?R.modifier[a](R[r],i):R[r];c.push({constraint:u,vals:i}),x++}return c.sort(function(t,e){var n=t.constraint.range,r=e.constraint.range;return r<n?-1:n<r?1:0}),f=c[x-1].constraint,{start:function(t,e){for(var n,r=e,a=R.array[t],i=1e3;i--&&!n&&r;){n=!0;for(var u=0;u<x;u++){var v=c[u].constraint,l=v.val(r),o=v.extent(r),d=a(l,c[u].vals,o);if(!v.isValid(r,d)){r=v[t](r,d),n=!1;break}}}return r!==R.NEVER&&(r="next"===t?f.start(r):f.end(r)),r},end:function(t,e){for(var n,r=R.array[t+"Invalid"],a="next"===t?function(t,e){return t.getTime()>e.getTime()}:function(t,e){return e.getTime()>t.getTime()},i=x-1;0<=i;i--){var u,v=c[i].constraint,l=v.val(e),o=v.extent(e),d=r(l,c[i].vals,o);void 0!==d&&(!(u=v[t](e,d))||n&&!a(n,u)||(n=u))}return n},tick:function(t,e){return new Date("next"===t?f.end(e).getTime()+R.SEC:f.start(e).getTime()-R.SEC)},tickStart:function(t){return f.start(t)}}},R.schedule=function(t){if(!t)throw new Error("Missing schedule definition.");if(!t.schedules)throw new Error("Definition must include at least one schedule.");for(var y=[],e=t.schedules.length,Y=[],E=t.exceptions?t.exceptions.length:0,n=0;n<e;n++)y.push(R.compile(t.schedules[n]));for(var r=0;r<E;r++)Y.push(R.compile(t.exceptions[r]));function a(t,e,n,r,a){var i,u,v=V(t),l=e,o=1e3,d=[],f=[],c=[],x="next"===t,s=x?0:1,m=x?1:0;if(!(n=n?new Date(n):new Date)||!n.getTime())throw new Error("Invalid start date.");for(!function(t,e,n,r){for(var a=0,i=e.length;a<i;a++)n[a]=e[a].start(t,r)}(t,y,d,n),function(t,e,n,r){V(t);for(var a=0,i=e.length;a<i;a++){var u=e[a].start(t,r);n[a]=u?[u,e[a].end(t,u)]:R.NEVER}}(t,Y,f,n);o--&&l&&(i=function(t,e){for(var n=t[0],r=1,a=t.length;r<a;r++)t[r]&&e(n,t[r])&&(n=t[r]);return n}(d,v))&&(!r||!v(i,r));)if(E&&(function(t,e,n,r){for(var a=V(t),i=0,u=e.length;i<u;i++){var v;n[i]&&!a(n[i][0],r)&&(v=e[i].start(t,r),n[i]=v?[v,e[i].end(t,v)]:R.NEVER)}}(t,Y,f,i),w=function(t,e,n){for(var r,a=V(t),i=0,u=e.length;i<u;i++){var v=e[i];!v||a(v[0],n)||v[1]&&!a(v[1],n)||r&&!a(v[1],r)||(r=v[1])}return r}(t,f,i)))S(t,y,d,w);else{if(a){var g=function(t,e){for(var n,r=0,a=t.length;r<a;r++)!t[r]||n&&!e(n,t[r][0])||(n=t[r][0]);return n}(f,v),w=function(t,e,n,r,a){for(var i,u=V(t),v=0,l=e.length;v<l;v++){var o=n[v];if(o&&o.getTime()===r.getTime()){var d=e[v].end(t,o);if(a&&(!d||u(d,a)))return a;i&&!u(d,i)||(i=d)}}return i}(t,y,d,i,g),D=x?[new Date(Math.max(n,i)),w?new Date(r?Math.min(w,r):w):void 0]:[w?new Date(r?Math.max(r,w.getTime()+R.SEC):w.getTime()+R.SEC):void 0,new Date(Math.min(n,i.getTime()+R.SEC))];if(u&&D[s].getTime()===u[m].getTime()?(u[m]=D[m],l++):(u=D,c.push(u)),!w)break;S(t,y,d,w)}else c.push(x?new Date(Math.max(n,i)):function(t,e,n,r){for(var a,i=0,u=e.length;i<u;i++)if(e[i]&&e[i].getTime()===n.getTime()){var v=t[i].tickStart(n);if(r&&v<r)return r;(!a||a<v)&&(a=v)}return a}(y,d,i,r)),function(t,e,n,r){for(var a=0,i=e.length;a<i;a++)n[a]&&n[a].getTime()===r.getTime()&&(n[a]=e[a].start(t,e[a].tick(t,r)))}(t,y,d,i);l--}for(var h=0,M=c.length;h<M;h++){var p=c[h];c[h]="[object Array]"===Object.prototype.toString.call(p)?[T(p[0]),T(p[1])]:T(p)}return 0===c.length?R.NEVER:1===e?c[0]:c}function T(t){if(t instanceof Date&&!isNaN(t.valueOf()))return new Date(t)}function S(t,e,n,r){for(var a=V(t),i=0,u=e.length;i<u;i++)n[i]&&!a(n[i],r)&&(n[i]=e[i].start(t,r))}function V(t){return"next"===t?function(t,e){return!e||t.getTime()>e.getTime()}:function(t,e){return!t||e.getTime()>t.getTime()}}return{isValid:function(t){return a("next",1,t,t)!==R.NEVER},next:function(t,e,n){return a("next",t||1,e,n)},prev:function(t,e,n){return a("prev",t||1,e,n)},nextRange:function(t,e,n){return a("next",t||1,e,n,!0)},prevRange:function(t,e,n){return a("prev",t||1,e,n,!0)}}},R.setTimeout=function(a,t){var i,u=R.schedule(t);return a&&function t(){var e=Date.now(),n=u.next(2,e);if(!n[0])return void(i=void 0);var r=n[0].getTime()-e;r<1e3&&(r=n[1]?n[1].getTime()-e:1e3);i=r<2147483647?setTimeout(a,r):setTimeout(t,2147483647)}(),{isDone:function(){return!i},clear:function(){clearTimeout(i)}}},R.setInterval=function(e,n){if(e){var r=R.setTimeout(function t(){a||(e(),r=R.setTimeout(t,n))},n),a=r.isDone();return{isDone:function(){return r.isDone()},clear:function(){a=!0,r.clear()}}}},R.date={},R.date.timezone=function(t){R.date.build=t?function(t,e,n,r,a,i){return new Date(t,e,n,r,a,i)}:function(t,e,n,r,a,i){return new Date(Date.UTC(t,e,n,r,a,i))};var e=t?"get":"getUTC",n=Date.prototype;R.date.getYear=n[e+"FullYear"],R.date.getMonth=n[e+"Month"],R.date.getDate=n[e+"Date"],R.date.getDay=n[e+"Day"],R.date.getHour=n[e+"Hours"],R.date.getMin=n[e+"Minutes"],R.date.getSec=n[e+"Seconds"],R.date.isUTC=!t},R.date.UTC=function(){R.date.timezone(!1)},R.date.localTime=function(){R.date.timezone(!0)},R.date.UTC(),R.SEC=1e3,R.MIN=60*R.SEC,R.HOUR=60*R.MIN,R.DAY=24*R.HOUR,R.WEEK=7*R.DAY,R.DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31],R.NEVER=0,R.date.next=function(t,e,n,r,a,i){return R.date.build(t,void 0!==e?e-1:0,void 0!==n?n:1,r||0,a||0,i||0)},R.date.nextRollover=function(t,e,n,r){var a=n.val(t),i=n.extent(t)[1];return(e||i)<=a||i<e?new Date(r.end(t).getTime()+R.SEC):r.start(t)},R.date.prev=function(t,e,n,r,a,i){var u=arguments.length;return e=u<2?11:e-1,n=u<3?R.D.extent(R.date.next(t,e+1))[1]:n,r=u<4?23:r,a=u<5?59:a,i=u<6?59:i,R.date.build(t,e,n,r,a,i)},R.date.prevRollover=function(t,e,n,r){return n.val(t)<=e||!e?r.start(r.prev(t,r.val(t)-1)):r.start(t)},R}();